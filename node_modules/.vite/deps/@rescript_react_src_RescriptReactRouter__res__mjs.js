import {
  __toESM,
  require_react
} from "./chunk-S2TLTWWO.js";

// node_modules/@rescript/react/src/RescriptReactRouter.res.mjs
var React = __toESM(require_react(), 1);

// node_modules/rescript/lib/es6/caml_array.js
function sub(x, offset, len) {
  var result = new Array(len);
  var j = 0;
  var i = offset;
  while (j < len) {
    result[j] = x[i];
    j = j + 1 | 0;
    i = i + 1 | 0;
  }
  ;
  return result;
}

// node_modules/rescript/lib/es6/curry.js
function app(_f, _args) {
  while (true) {
    var args = _args;
    var f = _f;
    var init_arity = f.length;
    var arity = init_arity === 0 ? 1 : init_arity;
    var len = args.length;
    var d = arity - len | 0;
    if (d === 0) {
      return f.apply(null, args);
    }
    if (d >= 0) {
      return /* @__PURE__ */ function(f2, args2) {
        return function(x) {
          return app(f2, args2.concat([x]));
        };
      }(f, args);
    }
    _args = sub(args, arity, -d | 0);
    _f = f.apply(null, sub(args, 0, arity));
    continue;
  }
  ;
}
function _1(o, a0) {
  var arity = o.length;
  if (arity === 1) {
    return o(a0);
  } else {
    switch (arity) {
      case 1:
        return o(a0);
      case 2:
        return function(param) {
          return o(a0, param);
        };
      case 3:
        return function(param, param$1) {
          return o(a0, param, param$1);
        };
      case 4:
        return function(param, param$1, param$2) {
          return o(a0, param, param$1, param$2);
        };
      case 5:
        return function(param, param$1, param$2, param$3) {
          return o(a0, param, param$1, param$2, param$3);
        };
      case 6:
        return function(param, param$1, param$2, param$3, param$4) {
          return o(a0, param, param$1, param$2, param$3, param$4);
        };
      case 7:
        return function(param, param$1, param$2, param$3, param$4, param$5) {
          return o(a0, param, param$1, param$2, param$3, param$4, param$5);
        };
      default:
        return app(o, [a0]);
    }
  }
}
function __1(o) {
  var arity = o.length;
  if (arity === 1) {
    return o;
  } else {
    return function(a0) {
      return _1(o, a0);
    };
  }
}

// node_modules/rescript/lib/es6/js_array.js
function filter(arg1, obj) {
  return obj.filter(__1(arg1));
}

// node_modules/rescript/lib/es6/js_string.js
function slice(from, to_, obj) {
  return obj.slice(from, to_);
}
function sliceToEnd(from, obj) {
  return obj.slice(from);
}
function split(arg1, obj) {
  return obj.split(arg1);
}
function splitAtMost(arg1, limit, obj) {
  return obj.split(arg1, limit);
}

// node_modules/@rescript/react/src/RescriptReactRouter.res.mjs
function safeMakeEvent(eventName) {
  if (typeof Event === "function") {
    return new Event(eventName);
  }
  var $$event = document.createEvent("Event");
  $$event.initEvent(eventName, true, true);
  return $$event;
}
function pathParse(str) {
  switch (str) {
    case "":
    case "/":
      return (
        /* [] */
        0
      );
    default:
      var raw = sliceToEnd(1, str);
      var match = raw[raw.length - 1 | 0];
      var raw$1 = match === "/" ? slice(0, -1, raw) : raw;
      var match$1 = splitAtMost("?", 2, raw$1);
      var raw$2 = match$1.length !== 2 ? raw$1 : match$1[0];
      var a = filter(function(item) {
        return item.length !== 0;
      }, split("/", raw$2));
      var _i = a.length - 1 | 0;
      var _res = (
        /* [] */
        0
      );
      while (true) {
        var res = _res;
        var i = _i;
        if (i < 0) {
          return res;
        }
        _res = {
          hd: a[i],
          tl: res
        };
        _i = i - 1 | 0;
        continue;
      }
      ;
  }
}
function path(serverUrlString, param) {
  var match = typeof window === "undefined" ? void 0 : window;
  if (serverUrlString !== void 0) {
    return pathParse(serverUrlString);
  } else if (match !== void 0) {
    return pathParse(match.location.pathname);
  } else {
    return (
      /* [] */
      0
    );
  }
}
function hash() {
  var $$window = typeof window === "undefined" ? void 0 : window;
  if ($$window === void 0) {
    return "";
  }
  var raw = $$window.location.hash;
  switch (raw) {
    case "":
    case "#":
      return "";
    default:
      return sliceToEnd(1, raw);
  }
}
function searchParse(str) {
  switch (str) {
    case "":
    case "?":
      return "";
    default:
      var match = splitAtMost("?", 2, str);
      if (match.length !== 2) {
        return "";
      } else {
        return match[1];
      }
  }
}
function search(serverUrlString, param) {
  var match = typeof window === "undefined" ? void 0 : window;
  if (serverUrlString !== void 0) {
    return searchParse(serverUrlString);
  } else if (match !== void 0) {
    return searchParse(match.location.search);
  } else {
    return "";
  }
}
function push(path2) {
  var match = typeof history === "undefined" ? void 0 : history;
  var match$1 = typeof window === "undefined" ? void 0 : window;
  if (match !== void 0 && match$1 !== void 0) {
    match.pushState(null, "", path2);
    match$1.dispatchEvent(safeMakeEvent("popstate"));
    return;
  }
}
function replace(path2) {
  var match = typeof history === "undefined" ? void 0 : history;
  var match$1 = typeof window === "undefined" ? void 0 : window;
  if (match !== void 0 && match$1 !== void 0) {
    match.replaceState(null, "", path2);
    match$1.dispatchEvent(safeMakeEvent("popstate"));
    return;
  }
}
function urlNotEqual(a, b) {
  if (a.hash !== b.hash || a.search !== b.search) {
    return true;
  } else {
    var _aList = a.path;
    var _bList = b.path;
    while (true) {
      var bList = _bList;
      var aList = _aList;
      if (!aList) {
        if (bList) {
          return true;
        } else {
          return false;
        }
      }
      if (!bList) {
        return true;
      }
      if (aList.hd !== bList.hd) {
        return true;
      }
      _bList = bList.tl;
      _aList = aList.tl;
      continue;
    }
    ;
  }
}
function url(serverUrlString, param) {
  return {
    path: path(serverUrlString, void 0),
    hash: hash(),
    search: search(serverUrlString, void 0)
  };
}
function watchUrl(callback) {
  var $$window = typeof window === "undefined" ? void 0 : window;
  if ($$window === void 0) {
    return function() {
    };
  }
  var watcherID = function() {
    callback(url(void 0, void 0));
  };
  $$window.addEventListener("popstate", watcherID);
  return watcherID;
}
function unwatchUrl(watcherID) {
  var $$window = typeof window === "undefined" ? void 0 : window;
  if ($$window !== void 0) {
    $$window.removeEventListener("popstate", watcherID);
    return;
  }
}
function useUrl(serverUrl, param) {
  var match = React.useState(function() {
    if (serverUrl !== void 0) {
      return serverUrl;
    } else {
      return url(void 0, void 0);
    }
  });
  var setUrl = match[1];
  var url$1 = match[0];
  React.useEffect(function() {
    var watcherId = watchUrl(function(url2) {
      setUrl(function(param2) {
        return url2;
      });
    });
    var newUrl = url(void 0, void 0);
    if (urlNotEqual(newUrl, url$1)) {
      setUrl(function(param2) {
        return newUrl;
      });
    }
    return function() {
      unwatchUrl(watcherId);
    };
  }, []);
  return url$1;
}
var dangerouslyGetInitialUrl = url;
export {
  dangerouslyGetInitialUrl,
  push,
  replace,
  unwatchUrl,
  useUrl,
  watchUrl
};
//# sourceMappingURL=@rescript_react_src_RescriptReactRouter__res__mjs.js.map
